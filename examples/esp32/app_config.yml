# ESP32 PCAL9555 Driver - Apps Configuration
# This file centralizes all app definitions, their source files, and metadata
# Used by build scripts, flash scripts, CI workflows, and CMake
#
# HIERARCHICAL CONFIGURATION:
# - Global settings in 'metadata' section apply to all apps by default
# - Individual apps can override 'idf_versions' and 'build_types' if needed
# - Apps without overrides use global settings automatically

version: "1.0"

metadata:
  project: "ESP32 PCAL95555 Driver Examples"
  default_app: "pcal95555_comprehensive_test"
  target: "esp32s3"
  idf_versions: ["release/v5.5"]
  build_types: [["Debug", "Release"]]

apps:
  # --------------------------------------------------------------------------
  # Comprehensive Test Suite
  # --------------------------------------------------------------------------
  pcal95555_comprehensive_test:
    description: "Comprehensive PCAL95555 GPIO expander test suite covering all functionality"
    source_file: "pcal95555_comprehensive_test.cpp"
    category: "test"
    idf_versions: ["release/v5.5"]
    build_types: ["Debug", "Release"]
    ci_enabled: true
    featured: true
    documentation: "README.md"
    test_sections:
      - "INITIALIZATION_TESTS"
      - "GPIO_DIRECTION_TESTS"
      - "GPIO_READ_WRITE_TESTS"
      - "PULL_RESISTOR_TESTS"
      - "DRIVE_STRENGTH_TESTS"
      - "OUTPUT_MODE_TESTS"
      - "POLARITY_TESTS"
      - "INPUT_LATCH_TESTS"
      - "INTERRUPT_TESTS"
      - "PORT_OPERATION_TESTS"
      - "MULTI_PIN_API_TESTS"
      - "ADDRESS_MANAGEMENT_TESTS"
      - "CONFIGURATION_TESTS"
      - "MULTI_PIN_PCAL_API_TESTS"
      - "INTERACTIVE_INPUT_TESTS"
      - "ERROR_HANDLING_TESTS"
      - "STRESS_TESTS"
    features:
      - "Complete driver API validation (17 test sections, 43 methods)"
      - "Auto-detects PCA9555 vs PCAL9555A chip variant"
      - "PCAL9555A-only tests auto-skip on PCA9555"
      - "GPIO pin direction (single, mask, initializer_list)"
      - "Pin read/write/toggle (single + multi-pin)"
      - "Pull-up/pull-down resistor configuration (PCAL9555A)"
      - "Drive strength configuration (PCAL9555A)"
      - "Output mode configuration (PCAL9555A)"
      - "Input polarity inversion (single, mask, initializer_list)"
      - "Input latch functionality (PCAL9555A)"
      - "Interrupt mask/status/callbacks (PCAL9555A)"
      - "Port-level operations"
      - "Address management (ChangeAddress, address-based constructor)"
      - "Configuration (SetRetries, EnsureInitialized)"
      - "Interactive button-press input test (optional)"
      - "Error handling (invalid pins, UnsupportedFeature)"
      - "Stress testing (rapid pin toggling)"
      - "FreeRTOS task-based test execution"
      - "GPIO14 progress indicator"
      - "Automatic pass/fail tracking"

  # --------------------------------------------------------------------------
  # LED Animation Demo
  # --------------------------------------------------------------------------
  pcal95555_led_animation:
    description: "LED animation demo driving 16 LEDs through PCA9555/PCAL9555A with visual patterns"
    source_file: "pcal95555_led_animation.cpp"
    category: "demo"
    idf_versions: ["release/v5.5"]
    build_types: ["Debug", "Release"]
    ci_enabled: true
    featured: true
    features:
      - "10 animation patterns exercising all GPIO output capabilities"
      - "Sequential chase, bounce, binary counter, breathing PWM"
      - "Wave/comet tail, random sparkle, build-up/teardown"
      - "Accelerating scan (slow-to-fast I2C stress test)"
      - "Center expand/contract, alternating flash"
      - "Active-LOW or active-HIGH LED configuration"
      - "Auto-detects PCA9555 vs PCAL9555A chip variant"
      - "Continuous loop with error health monitoring"
      - "Uses only standard PCA9555 registers (works on both chips)"

# ============================================================================
# BUILD CONFIGURATION (ESP-IDF Standard Build Types)
# ============================================================================

build_config:
  # Standard ESP-IDF/CMake build types
  # These match CMAKE_BUILD_TYPE values in ESP-IDF
  build_types:
    Debug:
      description: "Debug build with symbols, verbose logging, assertions"
      cmake_build_type: "Debug"
      optimization: "-O0"
      debug_level: "-g3"
      defines: ["DEBUG", "PCAL9555_DEBUG"]

    Release:
      description: "Release build optimized for performance"
      cmake_build_type: "Release"
      optimization: "-O2"
      debug_level: "-g0"
      defines: ["NDEBUG", "PCAL9555_RELEASE"]

  build_directory_pattern: "build-app-{app_type}-type-{build_type}-target-{target}-idf-{idf_version}"
  project_name_pattern: "esp32_pcal9555_{app_type}_app"

ci_config:
  # CI build timeout
  timeout_minutes: 30
  # Fail fast on first error
  fail_fast: false
  # Apps to exclude from specific build types (if needed)
  exclude_combinations: []
  # Apps that require special handling
  special_apps: []

