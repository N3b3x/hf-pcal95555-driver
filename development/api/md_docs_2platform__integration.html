<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HF-PCAL95555: Platform Integration ðŸ§©</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HF-PCAL95555<span id="projectnumber">&#160;0.1.0-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Platform Integration ðŸ§©</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md30"></a> <code>PACL95555</code> abstracts the IÂ²C operations behind the <code>i2cBus</code> interface. To use the library on a new platform you must implement this interface.</p>
<p>Each platform shown below demonstrates the minimum required methods. You can adapt the approach to any framework as long as your implementation performs the read and write transactions expected by the driver.</p>
<h1><a class="anchor" id="autotoc_md31"></a>
ESP32 (ESP-IDF)</h1>
<div class="fragment"><div class="line"><span class="keyword">class </span>ESP32I2CBus : <span class="keyword">public</span> PACL95555::i2cBus {</div>
<div class="line">    <span class="keywordtype">bool</span> write(uint8_t addr, uint8_t reg, <span class="keyword">const</span> uint8_t *data, <span class="keywordtype">size_t</span> len)<span class="keyword"> override </span>{</div>
<div class="line">        <span class="keywordflow">return</span> i2c_master_write_to_device(I2C_NUM_0, addr, &amp;reg, 1, 50/portTICK_PERIOD_MS) == ESP_OK &amp;&amp;</div>
<div class="line">               i2c_master_write_to_device(I2C_NUM_0, addr, data, len, 50/portTICK_PERIOD_MS) == ESP_OK;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">bool</span> read(uint8_t addr, uint8_t reg, uint8_t *data, <span class="keywordtype">size_t</span> len)<span class="keyword"> override </span>{</div>
<div class="line">        <span class="keywordflow">return</span> i2c_master_write_read_device(I2C_NUM_0, addr, &amp;reg, 1, data, len, 50/portTICK_PERIOD_MS) == ESP_OK;</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md32"></a>
Arduino (Wire)</h1>
<div class="fragment"><div class="line"><span class="keyword">class </span>ArduinoI2CBus : <span class="keyword">public</span> PACL95555::i2cBus {</div>
<div class="line">    <span class="keywordtype">bool</span> write(uint8_t addr, uint8_t reg, <span class="keyword">const</span> uint8_t *data, <span class="keywordtype">size_t</span> len)<span class="keyword"> override </span>{</div>
<div class="line">        Wire.beginTransmission(addr);</div>
<div class="line">        Wire.write(reg);</div>
<div class="line">        Wire.write(data, len);</div>
<div class="line">        <span class="keywordflow">return</span> Wire.endTransmission() == 0;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">bool</span> read(uint8_t addr, uint8_t reg, uint8_t *data, <span class="keywordtype">size_t</span> len)<span class="keyword"> override </span>{</div>
<div class="line">        Wire.beginTransmission(addr);</div>
<div class="line">        Wire.write(reg);</div>
<div class="line">        <span class="keywordflow">if</span> (Wire.endTransmission(<span class="keyword">false</span>) != 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        Wire.requestFrom(addr, len);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; len; ++i) data[i] = Wire.read();</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md33"></a>
STM32 (HAL)</h1>
<div class="fragment"><div class="line"><span class="keyword">class </span>STM32I2CBus : <span class="keyword">public</span> PACL95555::i2cBus {</div>
<div class="line">    <span class="keywordtype">bool</span> write(uint8_t addr, uint8_t reg, <span class="keyword">const</span> uint8_t *data, <span class="keywordtype">size_t</span> len)<span class="keyword"> override </span>{</div>
<div class="line">        <span class="keywordflow">return</span> HAL_I2C_Mem_Write(&amp;hi2c1, addr&lt;&lt;1, reg, I2C_MEMADD_SIZE_8BIT, (uint8_t*)data, len,</div>
<div class="line">HAL_MAX_DELAY) == HAL_OK;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">bool</span> read(uint8_t addr, uint8_t reg, uint8_t *data, <span class="keywordtype">size_t</span> len)<span class="keyword"> override </span>{</div>
<div class="line">        <span class="keywordflow">return</span> HAL_I2C_Mem_Read(&amp;hi2c1, addr&lt;&lt;1, reg, I2C_MEMADD_SIZE_8BIT, data, len, HAL_MAX_DELAY) == HAL_OK;</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><p>Use the interface that matches your platform or adapt one of these examples. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
